OJS 3.1.1 Release Notes
CVS tag: ojs-3_1_1-0

Release date: April 4, 2018
==============================

New Features
------------
	#520: Improve Submission Library utility
	#1692: Public identifiers for chapters
	#1816: Implement subscription support
	#1922: Add support for catalog paging
	#2714: Support browsing by section, subject and keyword
	#2872: Allow themes to override templates in plugins
	#3130: Improve blinding for role sharing between editor/author/reviewer

Bug Fixes
---------
	#1793: Test/fix PostgreSQL upgrades
	#1865: Adding review comments wipes out email changes
	#2102: Consider "Select All" feature for export tools
	#2195: Reviewers can sometimes see the names of the authors
	#2291: Missing site title
	#2441: Make wording of editorial team consistent in backend and frontend
	#2506: Fix genre assignment for upgrades
	#2564: Inconsistent HTML display in article titles
	#2571: Section word count field is inoperative
	#2759: Galleys displayed as Array
	#2794: Upload Revision canceled but still in revision list
	#2874: Remove citationLookup, citationParser and nlm30 metadata plugin
	#2894: Improve the reviewer selection list
	#2899: Error generating the path of Custom Page in Navigation Menu
	#2910: Non-administrators can see the Administration link on the front-end toolbar
	#2922: Uploading a new Galley file and selecting "Change file" corrupts the uploaded file
	#2933: Introduce menu caching
	#2942: Infinite loop in upgrade from 2.4.8.2 to 3.1, failing to skip missing files
	#2944: NavigationMenus - NMI_TYPE_CONTACT not returned by getMenuItemTypes
	#2945: restore defaults genres/components
	#2947: NavigationMenus - Issue with NMI with no displayable children
	#2952: NavigationMenus - NavigationMenu edit - unbind NavigationMenu from area
	#2955: Reference to chapters when editing component in OJS 3.1
	#2956: Plugins already installed in database but not filesystem cannot be re-installed
	#2960: Problems with Add Item action in Sidebar control
	#2962: Fix membership options
	#2964: APC usability issues
	#2965: Adding section editors to a section and returning to add more editors later breaks the section form
	#2967: Missing link from Site Administration to Journal Administration
	#2972: Untranslated locale keys in Roles select menu
	#2980: order by user_group_id in UserGroupDAO::getByRoleId
	#2987: Navigation Menus - not all default NMIs get translated upon install/upgrade
	#2988: Installation page depends on navigation menu tables, which may not exist
	#2989: Correct missing table alias for PostgreSQL upgrade
	#2994: Reveal more handler can fail to reveal more
	#2996: Paypal plugin has undeclared dependency
	#2998: Archiving page changes
	#3002: Enabled plugins disabled after upgrade
	#3003: Not possible delete Keywords in second language with X
	#3004: force_login_ssl should force register too
	#3007: remote galley and supp files are not displayed on the article page
	#3009: always provide multipleContexts variable
	#3011: Pass FormValidatorURL error message to js url validation
	#3015: New article components have NULL entry_key
	#3016: supplementary files migration
	#3028: citations parsing by line
	#3039: editor actions for all managers and sub-editors
	#3046: getCustomTemplateKeys parameters
	#3051: OAI record datestamp
	#3052: consider URL encoding for oai identifiers
	#3056: Navigation Config vs Static Pages
	#3062: wrong element attributes in oai_marc
	#3066: viewPlugin in the plugin gallery for journal managers
	#3070: Author names can be exposed to some reviewers
	#3071: Forms counter doesn't change
	#3072: Prevent range requests
	#3080: NavigationMenus - Custom Page Error on Site level
	#3084: Verify incomplete submissions behavior
	#3087: fix metrics assoc_type for supp files
	#3097: Sidebar blocks missing from search results
	#3101: Clean up locale settings upon language deletion
	#3106: choose e-mail template when selecting a reviewer
	#3108: Duplicated literal
	#3114: Select precedent reviewer for a new round failed
	#3122: Add copyFile method to SubmissionFileManager
	#3124: Enable OpenAIRE field for QuickSubmitForm
	#3125: Author name in export plugins
	#3127: Assistants not allowed to download galley files
	#3141: a string was missed in locale.xml
	#3144: NavigationMenus - Warnings removed for custom menuItems
	#3154: Error checking email format in profile page
	#3156: Submission Requirements translation are not available
	#3157: required tagit metadata fields not validated
	#3161: nl2br causes extra line breaks in copyright notice
	#3167: New discussion canceled but still in discussion list
	#3172: enable_beacon and other little things
	#3177: Replace calls to deprecated "create_function"
	#3178: Link on context logo/title in frontend incorrect
	#3184: Subscription type currency resets upon editing
	#3185: Correct PHP7.2 incompatibilities
	#3188: DECLINE decision sends unexpected "Unsuitable" in subject
	#3195: Fire form execute hooks in reviewer steps
	#3200: PostgreSQL type error in OAI interface
	#3204: COUNTER bot list is outdated
	#3206: Subscriptions page should not be accessible if payments are not enabled
	#3212: CSL styles should receive DOI without URL
	#3218: Upgrade failed: DB: Can't DROP 'user_group_id'; check that column/key exists
	#3219: Upgrade gets stuck due to lack of MoveNext() in repairSuppFilesFilestage
	#3220: fix migrateTimedViewsUsageStatistics
	#3228: Non-anonymized reviewer files not able to be deleted
	#3232: Manual payment plugin throws PHP Warning:  Missing argument 2 for Form::setData()
	#3237: Crossref as-crawled URLs should only include PDF galley URLs (if multiple formats are published)
	#3246: Update copyrights for 2018
	#3247: UI: reviewer page submission details - unnecessary information
	#3252: Getting section editors results in db error
	#3255: Ensure that upgraded reviews from OJS2 are double-blind
	#3267: NavigationMenus Site-wide unable to drop NMIs into empty NM edit areas.
	#3269: CSL Plugin doesn't display abbreviated journal title for AMA style
	#3273: When logged in, edit link on the announcement page is not working properly
	#3274: Redirect URI from Login as
	#3276: Native XML import fails on batch insert
	#3282: Missing navigation menu item for the search page
	#3283: Display usage statistics for last 12 months instead of for current year
	#3287: "User" and "Primary" (navigation menus management tools) are confusing
	#3288: "Custom Page" should not be default when adding a new navigation menu item
	#3289: Author `user_group_id` upgrade `UPDATE` is broken
	#3302: File upload gets stuck with certain language selections in multilingual journals
	#3311: "Subject" / "subjects" field "required" flag not behaving as expected
	#3318: Check minimum requirements before allowing to upgrade
	#3323: fix detachment of dependent entities at file revision upload confirmation
	#3329: Copyright Info with CC License Badge
	#3332: consider missing submission file in usage stats loader
	#3334: fix listing of successfully imported submissions
	#3336: External feed plugin obliterates custom blocks when enabled
	#3338: If html part of mail too long, new line with exclamation mark is inserted
	#3348: article DOI in native import
	#3357: Disciplin element should be discipline
	#3359: recommendOnly editor and section editor
	#3374: Dropdown nav menus in default theme don't work for rtl languages
	#3379: Article subtitles should appear in the issue TOC
	#3383: no context in LazyLoadPlugin get/setEnabled when using CLI
	#3385: Desisting from adding a new discussion leaves behind an empty discussion
	#3387: Remove gender fields
	#3390: upgrade email templates
	#3392: current release contains potentially dangerous old version of PHPMailer
	#3398: Section Editor assignment creates duplicate Pre-Review Discussion entries
	#3407: doubt about a translation
	#3412: RSS buttons left-over from OJS 2.x
	#3415: getTemplateResourceName for plugins in pkp-lib
	#3416: sr_SR migration to either sr_RS@latin or sr_RS@cyrillic
	#3420: Date issues for non-default date_format_short in reviewDueDate and responseDueDate
	#3421: Editing roles for a user in one journal destroys roles in others
	#3422: OJS 3.1.0.1 adding a participant with Safari does not close the modal window
	#3436: "Send to Review" and "Send to Production" for reccomendOnly users
	#3440: Even if you check "Do not send email" for notification, you receive email.
	#3443: Duplicate translation keys in en_US
	#3444: Multilingual custom email template does not apply to email body
	#3447: Task list shows too long
	#3448: Submission listings only show title for selected locale
	#3459: sitemap fix
	#3474: Restrict SubmissionFileRequestedRevisionRequiredPolicy to revision files only
	#3481: submission URL in recommendation form emails
	#3485: Missing sidebar items after upgrade from OJS 2.4.x with PostgreSQL
	#3488: Improve error presentation in file upload wizard
	#3491: Use mbstring-capable regexp functions in searching
	#3495: Modify API URLs in ui-library when restful_urls enabled
	#3506: Untranslated locale key for scheduledTaskLogs log file
	#3509: DataCite export plugin sets accepted date = submitted date instead of actual accepted date
	#3510: display last revisions of reviewer files
	#3517: require locale component for identifier tab, add a hook

